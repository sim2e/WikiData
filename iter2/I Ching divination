I Ching divination is a form of cleromancy applied to the I Ching. The text of the I Ching consists of sixty-four hexagrams: six-line figures of yin (broken) or yang (solid) lines, and commentaries on them. There are two main methods of building up the lines of the hexagram, using either 50 yarrow stalks or three coins. Some of the lines may be designated "old" lines, in which case the lines are subsequently changed to create a second hexagram. The text relating to the hexagram(s) and old lines (if any) is studied, and the meanings derived from such study can be interpreted as an oracle.

Methods
Each hexagram is six lines, written sequentially one above the other; each of the lines represents a state that is either yin (陰 yīn: dark, feminine, etc., represented by a broken line) or yang (陽 yáng: light, masculine, etc., a solid line), and either old (moving or changing, represented by an "X" written on the middle of a yin line, or a circle written on the middle of a yang line) or young (static, unchanging). The usual methods for consulting the I Ching as an oracle produce a "sacred" or "ritual" number for each type of line: 6 (for an old yin line), 7 (young yang), 8 (young yin), or 9 (old yang). The six lines are produced in order using the chosen method (see below for examples), beginning at the first (lowest) one and proceeding upward to the sixth (uppermost) line, each with its corresponding number. Then, the commentaries applying to the generated hexagram are studied; if the hexagram contains no old lines at all, that concludes the consultation, but if there are one or more old lines, the separate commentary for each such line is also studied. Then, the lines are appropriately changed (any old yin lines into young yang lines, and any old yang lines into young yin lines), which—with the young lines in the original hexagram remaining the same—results in a second, different, hexagram, the commentarial material on which is then also studied.
The method used by the diviner to generate the hexagram(s) depends on their circumstances and beliefs; the yarrow-stalk method is usually employed by traditionalists who find significance in its complexity, and in the resulting time needed to manipulate the stalks to produce a hexagram. Coin methods, and others, are used either by those short of time, or by fortune-tellers who need a quick reading. There are also methods to generate a hexagram by interpreting the time, direction, person, etc., instead of throwing coins or dividing and counting yarrow stalks.
Several of the methods described below force exactly one, or no, moving lines; the traditional yarrow-stalk method allows from zero to six moving lines. The yarrow-stalk method favours static lines over moving lines in the ratio 3:1.

Precursor to I Ching: Cracks in turtle shell
Plastromancy or the turtle-shell oracle is probably the earliest recorded form of fortune telling. The diviner would apply heat to a piece of a turtle shell (sometimes with a hot poker), and interpret the resulting cracks. The cracks were sometimes annotated with inscriptions, the oldest Chinese writings that have been discovered. This oracle predated the earliest versions of the Zhou Yi (dated from about 1100 BC) by hundreds of years.A variant on this method was to use ox shoulder bones, a practice called scapulimancy. When thick material was to be cracked, the underside was thinned by carving with a knife.

Yarrow stalks
Hexagrams may be generated by the manipulation of yarrow stalks. These are usually genuine Achillea millefolium stalks that have been cut and prepared for such purposes, or any form of wooden rod or sticks (the quality ranging from cheap hardwood to very expensive red sandalwood, etc.) which are plain, lacquered, or varnished. When genuine Achillea is used, varieties local to the diviner are considered the best, as they would contain qi closer to, and more in tune with, the diviner, or they may come from a particularly spiritual or relevant place, such as on the grounds of a Confucian temple. When not in use, they are kept in a cloth or silk bag/pouch or a wooden case/box.
Fifty yarrow stalks are used, though one stalk is set aside at the beginning and takes no further part in the process of consultation. The remaining forty-nine stalks are roughly sorted into two piles, and then for the right hand pile one stalk is initially "remaindered"; then the pile is "cast off" in lots of four (i.e., groups of four stalks are removed). The remainders from each half are combined (traditionally placed between the fingers of one hand during the counting process) and set aside, with the process then repeated twice (i.e., for a total of three times). The total number of stalks in the remainder pile will necessarily (if the procedure has been followed correctly) be 9 or 5, in the first count, and 8 or 4, in the second. 9 or 8 is assigned a value of 2; 5 or 4, a value of 3. The total of the three passes will be one of just four values: 6 (2+2+2), 7 (2+2+3), 8 (2+3+3), or 9 (3+3+3)—that value is the number of the first line.
The forty-nine stalks are then gathered and the entire procedure repeated to generate each of the remaining five lines of the hexagram.
The yarrow-stalk method produces unequal probabilities for obtaining each of the four totals, as shown in the table. Compared to the three-coin method discussed next, the probabilities of the lines produced by the yarrow-stalk method are significantly different.

Note that the Yarrow algorithm is a particular algorithm for generating random numbers; while it is named after the yarrow-stalk method of consulting the I Ching, its details are unrelated to it.

Coins
Three-coin method
The three-coin method came into use over a thousand years after the yarrow-stalk method. The quickest, easiest, and most popular method by far, it has largely supplanted yarrow stalks, but produces outcomes with different likelihoods. Three coins are tossed at once; each coin is given a value of 2 or 3, depending upon whether it is tails or heads, respectively. Six such tosses make the hexagram. Some fortune-tellers use an empty tortoise shell to shake the coins in before throwing them on a dish or plate.

Modified Three-coin method
The three-coin method can be modified to have the same probabilities as the yarrow-stalk method by having one of the coins be of a second coin type, or in some way be marked as special (i.e., be distinguishable from the other coins). All three coins are tossed at once. The results are counted just as in the original three-coin method, with two exceptions: one to make yin less likely to move, and one to make yang more likely to move. (The probability for 6/8/9/7 in the coin method is 2/6/2/6, but in the yarrow-stalk method is 1/7/3/5; hence, 6 has to occur less often, and 9 has to occur more often.)
In the case where the special coin is tails and the other two are both tails—which would normally produce a 6—re-flip the marked coin: if it remains tails, then it remains a 6 (moving yin); otherwise, treat it as an 8 (static yin). As a 6 can become a 6 or an 8, it reduces the probability of the moving 6. In other words, it makes the old yin less likely to change (or move).
In the case where the special coin is heads and the other two are both tails—which would normally produce a 7—re-flip the marked coin: if it remains heads, then it remains as a 7 (static yang); otherwise, it becomes a 9 (moving yang). As a 7 can become a 7 or an 9, it reduces the probability of the static 7. In other words, it makes the young yang less likely and hence more yangs change as a result.
This method retains the 50% chance of yin:yang, but changes the ratio of moving yin to static yin from 1:3 to 1:7; likewise, it changes the ratio of moving yang to static yang from 1:3 to 3:5, which is the same probabilities as the yarrow-stalk method.

Two-coin method
Some purists contend that there is a problem with the three-coin method because its probabilities differ from the more ancient, yarrow-stalk, method. In fact, over the centuries there have even been other methods used for consulting the oracle.
The two-coin method involves tossing one pair of coins twice: on the first toss, two heads give a value of 2, and anything else is 3; on the second toss, each coin is valued separately, to give a sum from 6 to 9, as above. This results in the same distribution of probabilities as for the yarrow-stalk method.

Simplified two-coin method
A modified version of the two-coin method improves on the original on several aspects. First, while maintaining the probabilities of the traditional yarrow-stalk method, it simplifies outcomes such that they become intuitive at first sight, without need of further calculations. Second, it reduces the average number of coin throws per hexagram by 25%, from 12 to 9. It does so by requiring to throw the coins a second time only if both coins land on the same face (either both heads, or both tails), thus only in 50% of instances. Third, it is easy to memorize, as it clearly identifies heads with yang, and tails with yin, and a greater share of heads/tails with old (aka mature, moving, changing) yang/yin.
The modified two-coin method involves tossing one pair of coins of different size or shape. The larger, or heavier coin is assigned primacy (and is reported here as first, dominant, outcome) while the outcome of the smaller one comes second. Let H be heads and T tails.
If the coins land H, T, yang dominates and the outcome is young yang, unchanging. There is no need to throw the coins again for the same line.
If the coins land T, H, then yin dominates and the outcome is young yin, unchanging. Again, there is no need to throw the coins again for the same line.
If the coins land both on heads (H, H) then the outcome is for sure yang, but one must throw again to verify if the yang is changing (aka old) or unchanging (young). In case the second throw yields at least one H (either H, H, or H, T, or T, H), then the yang is changing. If both coins land on T (T, T) at second throw then the yang is unchanging.
If the coins land both on tails (T, T) then the outcome is for sure yin, but one must throw again to verify if the yin is changing or unchanging. In case the second throw yields both tails (T, T), then the yin is changing. If any of the two coins lands on H (either H, T, or T, H, or H, H) at second throw then the yin is unchanging.
The modified two-coin method yields old yang (changing) 3/16 of the times. Unchanging yang 5/16 times, and unchanging yin 7/16. The remaining 1/16 outcomes is old yin (changing).
It is considered simplified as it reduces the number of throws and calculations needed to correctly identify the outcome of each hexagram line, compared to any other method. While this has its advantages, some purists consider the time required to build the hexagram as a fundamental aspect of I Ching divination, for its ceremonial as well as introspective purposes. This said, any other coin based method can be considered similarly lacking on this regard, when compared to the yarrow-stalk method.
As is the case for the conventional two-coin method and the four coin method, the simplified two-coin method can be boiled down to binary numbers, simply interpreting any H as 1 and any T as 0. Then, old yin takes value of 0000 (0 in decimal numbers), unchanging yin values between 0001 and 0111 (1 to 7), unchanging yang those between 1000 and 1100 (8 to 12), and old yang from 1101 to 1111 (13 to 15). This also clearly showcases the relative probabilities of each outcome.

Four coins
With tails assigned the value 0 (zero) and heads the value 1, four coins tossed at once can be used to generate a four-bit binary number, the right-most coin indicating the first bit, the next coin (to the first's left) indicating the next bit, etc. The number 0000 is called old yin; the next three numbers—0001, 0010, and 0011 (the binary numbers whose decimal equivalents are 1, 2, and 3, respectively)—are called old yang, with a similar principle applied to the remaining twelve outcomes. This gives identical results to the yarrow-stalk method.

The two-coin method described above can be performed with four coins, simply by having one pair of coins be alike—of the same size or denomination—while the other two are of a different size or denomination; the larger coins can then be counted as the first toss, while the two smaller coins constitute the second toss (or vice versa).

Six coins
Six coins—five identical coins and one different—can be thrown at once. The coin that lands closest to a line drawn on the table will make the first line of the hexagram, and so on: heads for yang, tails for yin. The distinct coin is a moving line. This method has the dual failings that (1) it forces every hexagram to be a changing hexagram, and (2) it only ever allows exactly one line to be changing.

Eight coins on Ba Qian
Eight coins, one marked, are tossed at once. They are picked up in order and placed onto a Bagua diagram; the marked coin rests on the lower trigram. The eight process is repeated for the upper trigram. After a third toss, the first six coins are placed on the hexagram to mark a moving line. This has the deficiency or allowing at most one moving line, whereas all six lines could be moving in traditional methods.

Dice
Any dice with an even number of faces can also be used in the same fashion as the coin tosses, with even die rolls for heads and odd for tails. An eight-sided die (d8) can be used to simulate the chances of a line being an old moving line equivalent to the yarrow-stalk method. For example, because the chances of any yin line or any yang line are equal in the yarrow-stalk method, there is a one-in-eight chance of getting any basic trigram, the same chance held under the ba qian method, so the ba qian method can be used to determine the basic hexagram. The d8 can then be used by rolling it once for each line to determine moving lines. A result of 1 on a yin line, or 3 or less on a yang line, will make that line a moving line, preserving the yarrow-stalk method's outcomes.
Another dice method that produces the 1:7:3:5 ratio of the yarrow-stalk method is to add 1d4 + 1d8. All odd results are considered yin, with the result of 11 denoting an old yin. Any even results would be considered yang, with both 4 and 10 treated as old yang.
Two dice methods that not only produce the yarrow-stalk probabilities but maintain the traditional even–odd associations of yin and yang are the 3d4 and 2d8 methods. In the 3d4 method, one rolls three four-sided dice and adds their outcomes, treating all odd totals as yang and all even totals as yin, with totals of 4, 7, and 12 indicating a moving line. The 2d8 method works analogously for two eight-sided dice, but here, any total over 10 (with the exception of 12) is considered moving.

Calendric cycles and astrology
There is a tradition of Taoist thought which explores numerology, esoteric cosmology, astrology and feng shui in connection with the I Ching.

The Han period (206 BCE-220 CE)… saw the combination and correlation of the I Ching, particularly in its structural aspects of line, trigrams, and hexagrams, with the yin-yang and wu hsing (Five Element) theories of the cosmologists, with numerical patterns and speculations, with military theory, and, rather more nebulously, with the interests of the fang-shih or "Masters of Techniques," who ranged over many areas, from practical medicine, through alchemy and astrology, to the occult and beyond.
The eleventh-century Neo-Confucian philosopher Shao Yung contributed advanced methods of divination including the Plum Blossom Yi Numerology, a horary astrology that takes into account the number of calligraphic brush strokes of one's query. Following the associations Carl Jung drew between astrology and I Ching with the introduction of his theory of synchronicity, the authors of modern Yi studies are much informed by the astrological paradigm. Chu and Sherrill provide five astrological systems in An Anthology of I Ching and in The Astrology of I Ching develop a form of symbolic astrology that uses the eight trigrams in connection with the time of one's birth to generate an oracle from which further hexagrams and a daily line judgement are derived. Another modern development incorporates the planetary positions of one's natal horoscope against the backdrop of Shao Yung's circular Fu Xi arrangement and the Western zodiac to provide multiple hexagrams corresponding to each of the planets.

Wen Wang Gua method
This method goes back to Jing Fang (78–37 BC). While a hexagram is derived with one of the common methods like coin or yarrow stalks, here the divination is not interpreted on the basis of the classic I Ching text. Instead, this system connects each of the six hexagram lines to one of the Twelve Earthly Branches, and then the picture can be analyzed with the use of 5 Elements (Wu Xing).By bringing in the Chinese calendar, this method not only tries to determine what will happen, but also when it will happen. As such, Wen Wang Gua makes a bridge between I Ching and the Four Pillars of Destiny.

Software methods
The preceding ("concrete"/physical) methods can be simulated in ("abstract"/conceptual) software. This has the theoretical advantage of improving randomness aspects of consulting the I Ching ("not-doing" in the personal sense, enhancing the "universal" principle). For all methods, one must pre-focus/prepare the mind.
Here is a typical example for the "modified three-coin" method:

With a modified three-coin method as default, this may avoid the Sung dynasty issue, i.e., when you have an easily available and simple method, you use it—but with a wrong probability! (Also, the first number starts from the bottom like a hexagram.)
A JavaScript version of the Yarrow Stalk method, which generates slightly different probabilities, is available in open source form at GitHub.

Probability analysis of I Ching divination
Most analyses of the probabilities of either the coin method or yarrow-stalk method agree on the probabilities for each method. The coin method varies significantly from the yarrow-stalk method, in that the former gives the same probability to both of the moving lines and to both of the static lines, which is not the case in the yarrow-stalk method.
However, the calculation of the frequencies for the yarrow-stalk method—generally believed to be the same as those described in this article in the simplified method using sixteen objects—contains a further error, in the opinion of Andrew Kennedy, which is that of including the selection of zero as a quantity for either hand. The yarrow-stalk procedure expressly requires that the four numbers be produced without using zero; Kennedy shows that by not allowing the user to select zero for either hand, or a single stalk for the right hand (this stalk is moved to the left hand before counting by fours, and so also leaves a zero in the right hand), the hexagram frequencies change significantly for a daily user of the oracle. Kennedy has modified the simplified method of using sixteen coloured objects described in this article as follows:

take 38 objects, of which
8 are of one colour = moving yang
2 are of a different colour = moving yin
11 are of a different colour = static yang
17 are of a different colour = static yin
This arrangement produces Kennedy's calculated frequencies within 0.1%.

In popular culture
In Profiler Season 1, Episode 3: "Holy Alliance" (1996), a serial killer uses I Ching, and the hexagram determines what and how someone is chosen and killed.
In the Mad Men season 6 episode, "Crash", Frank Gleason's flower child daughter, Wendy, uses the three-coin method to tell fortunes at the offices of the newly merged firm.
In The Man In the High Castle by Philip K. Dick, several characters consult the I Ching at various points and consider the answers given. Dick apparently used the I Ching while writing his novel, to help him decide on the direction of the plot.
In the TV adaptation of the novel, the I Ching is habitually used by character Nabosuke Tagomi, who later teaches this to Juliana Crain and Trudy Walker.
In the song "God", John Lennon states that he "doesn't believe in I Ching", among many other religious and cultural phenomena that he claims to not believe in or follow.
The song "Walking On The Chinese Wall" by Philip Bailey references the I Ching and the coin method.
In Philip Pullman's The Amber Spyglass, Mary Malone uses the I Ching as a way to communicate with Dust.
In episode 700 of the Dark Shadows original TV series, Barnabas Collins and Professor Elliott Stokes discover a set of I Ching wands in a drawer in an abandoned section of the Collinwood mansion in 1969. Barnabas casts himself into a trance using the wands, allowing his astral body to travel back to the year 1897.
In the video game Cyberpunk 2077, players can undertake a mission to collect several self-driving cars driven by artificial intelligence. If the player chooses to grant the cars independence, they will receive messages from one vehicle stating that it has discovered the meaning of life through the 61st hexagram.
The song "Chapter 24" by Pink Floyd takes its lyrics from the commentary on the 24th hexagram.

References
External links
I Ching Book of Changes New free site with extensive interpretation of I Ching hexagrams, with free online I Ching reading, using Yarrow-stick Method algorithm, no ads no pop-ups.
I Ching Online Reading Classic online I Ching fortune telling where the forecast is made using the classic Yarrow Stalks method.
Eight Houses Basic information on the interpretive system of Jing Fang known as Wen Wang Gua.
Github Source using 3 Methods including yarrow-stick, modified 3 coin and 3 coins A source code for the yarrow-stick, modified 3 coin and the original coin method on GitHub for other people's comments and possible "pull request".
Casting I Ching A collection of methods for casting I Ching hexagrams. Includes coins, sticks, cards, dice, and other devices.